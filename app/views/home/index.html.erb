<h1>Flats</h1>
<h3>Boas vindas ao sistema de locação de apartamentos</h3>

<nav>
    <%= link_to "Cadastrar imóvel", new_property_path, :id => 'register_link' %>
    <%= link_to "Cadastrar tipo de imóvel", new_property_type_path, :id => 'type_register_link' %>
</nav>

<div id="filtering">
    <h3>Filtrar</h3>
    <%= form_with url: filter_path, method: :get do |form| %>
        <%= form.label :property_type_filter, 'Tipo de propriedade:' %>
        <%= form.select :property_type_filter, @property_types.map {|p_type| [p_type.name, p_type.id]} %>
        <%= form.submit 'Procurar' %>
    <% end %>
</div>

<% unless @properties.empty? %>
    <div id="properties">
    <% @properties.each do |property| %>
        <div id=<%= "property-#{property.id}" %>>
            <h4><%= link_to property.title, property_path(property), :class => "details_link title" %></h4>
            <p class="description"><%= property.description %></p>
            <p class="rooms">Quartos: <%= property.rooms %></p>
            <p class="parking_available">Tem estacionamento? <%= property.parking_available ? "sim" : "não" %></p>
        </div>
    <% end %>
    </div>
<% else %>
    <div id="no_properties_note">
        <p>Nada ainda :(</p>
    </div>
<% end %>